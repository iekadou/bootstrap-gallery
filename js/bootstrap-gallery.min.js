/*!
 * bootstrap-gallery v0.0.10 by @iekadou
 * Copyright (c) 2015-2016 Jonas Braun
 *
 * http://iekadou.com/programming/bootstrap-gallery/
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
(function(b){var c=function(e,d){this.$gallery=b(e);this.options=b.extend({},c.defaults);if(d&&d.hasOwnProperty("iconset")&&d.iconset=="fontawesome"){b.extend(this.options,c.fontawesomeOptions)}b.extend(this.options,d);this.count=this.$gallery.children().length;this.index=0;if(c.elements===undefined){var f={"$modal":b("<div/>").attr(this.options.modalAttrs),"$container":b("<div/>").attr(this.options.containerAttrs),"$closeBtn":b("<button/>").attr(this.options.closeBtnAttrs),"$btnPrev":b("<button/>").attr(this.options.btnPrevAttrs),"$btnNext":b("<button/>").attr(this.options.btnNextAttrs),"$img":b("<img/>").attr(this.options.imgAttrs),"$indicator":b("<span/>").attr(this.options.indicatorAttrs)};if(this.options.caption){f.$caption=b("<div/>").attr(this.options.captionAttrs)}if(!(this.options.hasOwnProperty("controlsOutside")&&this.options.controlsOutside==true)){f["$wrapper"]=b("<div/>").attr(this.options.wrapperAttrs);f.wrapper=f["$wrapper"][0];f.$wrapper.append(f.$closeBtn,f.$btnPrev,f.$btnNext,f.$img);if(this.options.caption){f.$wrapper.append(f.$caption)}f.$wrapper.append(f.$indicator);f.$container.append(f.$wrapper);f.$modal.append(f.$container)}else{f.$container.append(f.$btnPrev,f.$btnNext,f.$img);if(this.options.caption){f.$container.append(f.$caption)}f.$container.append(f.$indicator);f.$modal.append(f.$closeBtn,f.$container)}b("body").append(f.$modal);this.elements=f;c.elements=f;this.registerKeys();this.registerWindowResize();this.registerTouches()}else{this.elements=c.elements}this.registerThumbs()};c.defaults={modalAttrs:{id:"gallery-modal","class":"modal fade",tabindex:"-1",role:"dialog","aria-hidden":"true"},containerAttrs:{"class":"img-container"},wrapperAttrs:{"class":"img-wrapper"},imgAttrs:{"class":"img-responsive",src:"#"},closeBtnAttrs:{"class":"btn-close glyphicon glyphicon-remove","aria-hidden":"true"},btnPrevAttrs:{"class":"btn-prev glyphicon glyphicon-chevron-left"},btnNextAttrs:{"class":"btn-next glyphicon glyphicon-chevron-right"},indicatorAttrs:{"class":"indicator glyphicon glyphicon-refresh"},captionAttrs:{"class":"caption"},indicatorThreshold:100,swipeThreshold:30,caption:false,hideUnnecessaryIcons:true};c.fontawesomeOptions={closeBtnAttrs:{"class":"btn-close fa fa-times","aria-hidden":"true"},btnPrevAttrs:{"class":"btn-prev fa fa-angle-left"},btnNextAttrs:{"class":"btn-next fa fa-angle-right"},indicatorAttrs:{"class":"indicator fa fa-refresh fa-spin"}};c.prototype.registerBtns=function(){var f=this.elements;var e=this.options;var d=this;if(d.count<2&&e.hideUnnecessaryIcons){f.$btnNext.addClass("hide");f.$btnPrev.addClass("hide")}else{f.$btnNext.off("click").on("click",function(g){g.preventDefault();d.index++;if(d.index>=d.count){d.index=0}d.updateImg(d.index);return false});f.$btnPrev.off("click").on("click",function(g){g.preventDefault();d.index--;if(d.index<0){d.index=d.count-1}d.updateImg(d.index);return false})}f.$container.off("click").on("click",function(g){g.preventDefault();f.$modal.modal("hide")});f.$closeBtn.off("click").on("click",function(g){g.preventDefault();f.$modal.modal("hide")});if(f.hasOwnProperty("$wrapper")){f.$container.off("click").on("click",function(g){g.preventDefault();f.$modal.modal("hide")});f.$wrapper.off("click").on("click",function(g){g.preventDefault();return false})}else{f.$img.off("click").on("click",function(g){g.preventDefault();return false})}};c.prototype.registerKeys=function(){var d=this.elements;d.$modal.off("keydown").on("keydown",function(f){if(f.keyCode==37){d.$btnPrev.click()}if(f.keyCode==39){d.$btnNext.click()}if(f.keyCode==27){d.$modal.modal("hide")}})};c.prototype.registerThumbs=function(){var e=this.elements;var d=this;this.$gallery.children().each(function(){b(this).off("click").on("click",function(f){f.preventDefault();e.$indicator.css("display","none");d.index=b(this).index();d.updateImg(d.index);e.$modal.modal();d.registerBtns();setTimeout(function(){e.$modal.focus()},200)})})};c.prototype.registerTouches=function(){var d=this;d.clientXStart=0;d.clientXEnd=0;d.elements.$modal.on("touchstart",function(f){d.clientXStart=d.clientXEnd=f.originalEvent.touches[0].clientX}).on("touchmove",function(f){f.preventDefault();d.clientXEnd=f.originalEvent.touches[0].clientX}).on("touchend",function(f){if(d.clientXStart>d.clientXEnd+d.options.swipeThreshold){d.elements.$btnNext.click()}else{if(d.clientXStart<d.clientXEnd-d.options.swipeThreshold){d.elements.$btnPrev.click()}}})};c.prototype.registerWindowResize=function(){var d=this;if(d.elements.hasOwnProperty("$wrapper")){var e=this.elements.wrapper;b(window).resize(function(){e.style.display="none";e.offsetHeight;e.style.display="inline-block";d.elements.$img.css("max-height",parseInt(parseInt(b(window).height())*0.9))})}else{b(window).resize(function(){d.elements.$img.css("max-height",parseInt(parseInt(b(window).height())*0.9))})}};c.prototype.updateImg=function(f){var d=this;var e=d.$gallery.children().get(f).getAttribute("href");var g=b(d.$gallery.children().get(f)).children("img").attr("alt");if(d.elements.$img.attr("src")!=e){if(d.options.caption){d.elements.$caption.css("display","none")}d.elements.$indicator.delay(d.options.indicatorThreshold).queue(function(h){b(this).css("display","inline-block");h()});d.elements.$img.attr("src",e).load(function(){d.elements.$indicator.stop().css("display","none");if(d.options.caption){if(g){d.elements.$caption.text(g);d.elements.$caption.css("width",d.elements.$img.width());setTimeout(function(){d.elements.$caption.css("width",d.elements.$img.width())},250);b(window).on("resize:bootstrap_gallery",function(h){d.elements.$caption.css("width",d.elements.$img.width())});d.elements.$caption.css("display","inline-block");d.elements.$caption.css("top",d.elements.$caption.outerHeight()*-1)}else{d.elements.$caption.css("display","none")}}}).css("max-height",parseInt(parseInt(b(window).height())*0.9))}};var a=b.fn.bootstrapGallery;b.fn.bootstrapGallery=function(d){return this.each(function(){var e=b(this).data("bs.Gallery");if(!e){b(this).data("bs.Gallery",(e=new c(b(this),d)))}})};b.fn.bootstrapGallery.Constructor=c;b.fn.bootstrapGallery.noConflict=function(){b.fn.bootstrapGallery=a;return this}}(jQuery));